{%extends 'base.html'%}
{% block title %}ShopeeX - Danh sách xử lí{% endblock %}
{% block style%}
<style>
    .custom-table {
        background-color: #f5f5f5;
        /* Use your preferred lighter color */
    }
</style>
{% endblock %}
{% block content %}
<div class="container-fluid">
    <div class="card">
        <div class="card-header">
            <h2>Danh sách tài khoản đang xử lí</h1>
        </div>
        <div class="card-body">
            <div class="table-responsive"> <!-- Make the table responsive -->
                <table class="table table-striped table-bordered table-hover">
                    <thead class="thead-light"> <!-- Use a light header background -->
                        <tr>
                            <th>Cookie</th>
                            <th>Tên đăng nhập</th>
                            <th>Ngày khởi tạo</th>
                            <th>Trạng thái</th>
                            <th>Ghi chú</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for item in page %}
                        <tr>
                            <td class="cookie-cell">{{ item.cookie }}</td>
                            <td>{{ item.username }}</td>
                            <td>{{ item.created_at|date:"d-m-Y H:i:s" }}</td>
                            <td>
                                {% if item.status == -1 %}
                                <div class="badge badge-warning">ĐANG XỬ LÍ</div>
                                {% elif item.status == 0 %}
                                <div class="badge badge-danger">LỖI</div>
                                {% elif item.status == 1 %}
                                <div class="badge badge-success">THÀNH CÔNG</div>
                                {% else %}
                                <div class="badge badge-secondary">KHÔNG XÁC ĐỊNH</div>
                                {% endif %}
                            </td>
                            <td>{{ item.note }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                    <nav aria-label="Page navigation">
                        <ul class="pagination">
                            {% if page.has_previous %}
                            <li class="page-item">
                                <a class="page-link" href="?page=1" aria-label="First">
                                    <span aria-hidden="true">&laquo;&laquo;</span>
                                </a>
                            </li>
                            <li class="page-item">
                                <a class="page-link" href="?page={{ page.previous_page_number }}" aria-label="Previous">
                                    <span aria-hidden="true">&laquo;</span>
                                </a>
                            </li>
                            {% endif %}
                            <li class="page-item disabled"><span class="page-link">Trang {{ page.number }} trên
                                    {{total_pages}}</span></li>

                            {% if page.has_next %}
                            <li class="page-item">
                                <a class="page-link" href="?page={{ page.next_page_number }}" aria-label="Next">
                                    <span aria-hidden="true">&raquo;</span>
                                </a>
                            </li>
                            <li class="page-item">
                                <a class="page-link" href="?page={{ page.paginator.num_pages }}" aria-label="Last">
                                    <span aria-hidden="true">&raquo;&raquo;</span>
                                </a>
                            </li>
                            {% endif %}
                        </ul>
                    </nav>
                </table>
            </div>
        </div>
    </div>
</div>
{% endblock %}
{% block script%}
<script>
    // JavaScript function to format the cookie text
    function formatCookieText() {
        const cookieCells = document.querySelectorAll(".cookie-cell");

        cookieCells.forEach(function (cookieCell) {
            const cookieText = cookieCell.textContent;
            if (cookieText.length > 9) {
                const formattedCookie = `${cookieText.substring(0, 5)}...${cookieText.substring(cookieText.length - 4)}`;
                cookieCell.textContent = formattedCookie;
            }
        });
    }

    // Call the formatCookieText function when the page loads
    window.addEventListener("load", formatCookieText);
</script>
{% endblock %}